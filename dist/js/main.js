document.addEventListener("DOMContentLoaded",function(){function n(){for(var n=0;n<9;n++)u[n].innerHTML="",a.board[n]=0;a.running=!1,a.humSymbol="X",a.comSymbol="O",document.getElementById("win").style.display="none",document.getElementById("lose").style.display="none",document.getElementById("draw").style.display="none"}function e(n){a.running&&0===a.board[n]&&(t(n,a.human),r())}function t(n,e){a.running&&0===a.board[n]&&(e===a.human?(u[n].style.color="#22f",u[n].innerHTML=a.humSymbol,a.board[n]=a.HUMVAL):(u[n].style.color="#f22",u[n].innerHTML=a.comSymbol,a.board[n]=a.COMVAL),!o(a.board,e)&&i(a.board)&&(document.getElementById("draw").style.display="block",a.draw.play()),o(a.board,e)&&(e===a.human?(document.getElementById("win").style.display="block",a.win.play()):(document.getElementById("lose").style.display="block",a.lose.play()),a.running=!1))}function o(n,e){for(var t=e===a.human?a.HUMVAL:a.COMVAL,o=0;o<8;o++){for(var i=!0,r=0;r<3;r++)if(n[a.winMatrix[o][r]]!=t){i=!1;break}if(i)return!0}return!1}function i(n){for(var e=0;e<9;e++)if(0===n[e])return!1;return!0}function r(){return"easy"===a.difficulty?void l():"medium"===a.difficulty?100*Math.random()<=50?void m(a.board,0,a.computer):void l():void m(a.board,0,a.computer)}function d(){a.empties=[];for(var n=0;n<9;n++)0===a.board[n]&&a.empties.push(n)}function l(){d(),t(a.empties[Math.floor(Math.random()*a.empties.length)],a.computer)}function m(n,e,r){if(o(n,!r))return-10+e;if(i(n))return 0;for(var d=r===a.human?a.HUMVAL:a.COMVAL,l=-(1/0),u=0,c=0;c<9;c++)if(0===n[c]){var y=n.slice();y[c]=d;var s=-m(y,e+1,!r);s>l&&(l=s,u=c)}return 0===e&&t(u,a.computer),l}var a={board:[0,0,0,0,0,0,0,0,0],running:!1,human:!1,computer:!0,HUMVAL:-1,COMVAL:1,humSymbol:"X",comSymbol:"O",difficulty:"easy",empties:[],winMatrix:[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],win:new Audio("/tictactoe/media/win.mp3"),lose:new Audio("/tictactoe/media/lose.mp3"),draw:new Audio("/tictactoe/media/draw.mp3")},u=document.getElementsByClassName("square"),c=document.getElementById("playerX"),y=document.getElementById("playerO"),s=document.getElementById("reset"),f=document.forms.hardness.elements.difficulty;document.getElementById("win").style.display="none",document.getElementById("lose").style.display="none",document.getElementById("draw").style.display="none",c.addEventListener("click",function(){a.running!==!0&&(a.humSymbol="X",a.comSymbol="O",a.running=!0)}),y.addEventListener("click",function(){a.running!==!0&&(a.humSymbol="O",a.comSymbol="X",a.running=!0,r())}),s.addEventListener("click",function(){n()});for(var p=0;p<f.length;p++)f[p].onclick=function(){a.difficulty=this.value};for(var b=0;b<u.length;b++)!function(n){u[n].addEventListener("click",function(){e(n)})}(b)});