document.addEventListener("DOMContentLoaded",function(){function e(){for(var e=0;e<9;e++)u[e].innerHTML="",m.board[e]=0;m.running=!0,m.humSymbol="X",m.comSymbol="O",document.getElementById("win").style.display="none",document.getElementById("lose").style.display="none",document.getElementById("draw").style.display="none"}function n(e){if(m.running)for(var n=0;n<9;n++)n===e&&0===m.board[n]&&(t(e,m.human),r())}function t(e,n){m.running&&0===m.board[e]&&(n===m.human?(u[e].style.color="#22f",u[e].innerHTML=m.humSymbol,m.board[e]=m.HUMVAL):(u[e].style.color="#f22",u[e].innerHTML=m.comSymbol,m.board[e]=m.COMVAL),!o(m.board,n)&&i(m.board)&&(document.getElementById("draw").style.display="block",m.draw.play()),o(m.board,n)&&(n===m.human?(document.getElementById("win").style.display="block",m.win.play()):(document.getElementById("lose").style.display="block",m.lose.play()),m.running=!1))}function o(e,n){for(var t=n===m.human?m.HUMVAL:m.COMVAL,o=0;o<8;o++){for(var i=!0,r=0;r<3;r++)if(e[m.winMatrix[o][r]]!=t){i=!1;break}if(i)return!0}return!1}function i(e){for(var n=0;n<9;n++)if(0===e[n])return!1;return!0}function r(){return"easy"===m.difficulty?void a():"medium"===m.difficulty?100*Math.random()<=50?void l(m.board,0,m.computer):void a():void l(m.board,0,m.computer)}function d(){m.empties=[];for(var e=0;e<9;e++)0==m.board[e]&&m.empties.push(e)}function a(){d(),t(m.empties[Math.floor(Math.random()*m.empties.length)],m.computer)}function l(e,n,r){if(o(e,!r))return-10+n;if(i(e))return 0;for(var d=r===m.human?m.HUMVAL:m.COMVAL,a=-(1/0),u=0,c=0;c<9;c++)if(0===e[c]){var y=e.slice();y[c]=d;var s=-l(y,n+1,!r);s>a&&(a=s,u=c)}return 0===n&&t(u,m.computer),a}var m={board:[0,0,0,0,0,0,0,0,0],running:!0,human:!1,computer:!0,HUMVAL:-1,COMVAL:1,humSymbol:"X",comSymbol:"O",difficulty:"easy",empties:[],winMatrix:[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],win:new Audio("/tictactoe/media/win.mp3"),lose:new Audio("/tictactoe/media/lose.mp3"),draw:new Audio("/tictactoe/media/draw.mp3")},u=document.getElementsByClassName("square"),c=document.getElementById("playerX"),y=document.getElementById("playerO"),s=document.getElementById("reset"),f=document.forms.hardness.elements.difficulty;document.getElementById("win").style.display="none",document.getElementById("lose").style.display="none",document.getElementById("draw").style.display="none",c.addEventListener("click",function(){m.humSymbol="X",m.comSymbol="O"}),y.addEventListener("click",function(){m.humSymbol="O",m.comSymbol="X",r()}),s.addEventListener("click",function(){e()});for(var p=0;p<f.length;p++)f[p].onclick=function(){m.difficulty=this.value};for(var b=0;b<u.length;b++)!function(e){u[e].addEventListener("click",function(){n(e)})}(b)});