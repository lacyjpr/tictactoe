document.addEventListener("DOMContentLoaded",function(){function n(){for(var n=0;n<9;n++)u[n].innerHTML="",m.board[n]=0;m.running=!1,m.humSymbol="X",m.comSymbol="O",document.getElementById("win").style.display="none",document.getElementById("lose").style.display="none",document.getElementById("draw").style.display="none"}function e(n){if(m.running)for(var e=0;e<9;e++)e===n&&0===m.board[e]&&(t(n,m.human),r())}function t(n,e){m.running&&0===m.board[n]&&(e===m.human?(u[n].style.color="#22f",u[n].innerHTML=m.humSymbol,m.board[n]=m.HUMVAL):(u[n].style.color="#f22",u[n].innerHTML=m.comSymbol,m.board[n]=m.COMVAL),!o(m.board,e)&&i(m.board)&&(document.getElementById("draw").style.display="block",m.draw.play()),o(m.board,e)&&(e===m.human?(document.getElementById("win").style.display="block",m.win.play()):(document.getElementById("lose").style.display="block",m.lose.play()),m.running=!1))}function o(n,e){for(var t=e===m.human?m.HUMVAL:m.COMVAL,o=0;o<8;o++){for(var i=!0,r=0;r<3;r++)if(n[m.winMatrix[o][r]]!=t){i=!1;break}if(i)return!0}return!1}function i(n){for(var e=0;e<9;e++)if(0===n[e])return!1;return!0}function r(){return"easy"===m.difficulty?void a():"medium"===m.difficulty?100*Math.random()<=50?void l(m.board,0,m.computer):void a():void l(m.board,0,m.computer)}function d(){m.empties=[];for(var n=0;n<9;n++)0===m.board[n]&&m.empties.push(n)}function a(){d(),t(m.empties[Math.floor(Math.random()*m.empties.length)],m.computer)}function l(n,e,r){if(o(n,!r))return-10+e;if(i(n))return 0;for(var d=r===m.human?m.HUMVAL:m.COMVAL,a=-(1/0),u=0,c=0;c<9;c++)if(0===n[c]){var y=n.slice();y[c]=d;var s=-l(y,e+1,!r);s>a&&(a=s,u=c)}return 0===e&&t(u,m.computer),a}var m={board:[0,0,0,0,0,0,0,0,0],running:!1,human:!1,computer:!0,HUMVAL:-1,COMVAL:1,humSymbol:"X",comSymbol:"O",difficulty:"easy",empties:[],winMatrix:[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],win:new Audio("/tictactoe/media/win.mp3"),lose:new Audio("/tictactoe/media/lose.mp3"),draw:new Audio("/tictactoe/media/draw.mp3")},u=document.getElementsByClassName("square"),c=document.getElementById("playerX"),y=document.getElementById("playerO"),s=document.getElementById("reset"),f=document.forms.hardness.elements.difficulty;document.getElementById("win").style.display="none",document.getElementById("lose").style.display="none",document.getElementById("draw").style.display="none",c.addEventListener("click",function(){m.running!==!0&&(m.humSymbol="X",m.comSymbol="O",m.running=!0)}),y.addEventListener("click",function(){m.running!==!0&&(m.humSymbol="O",m.comSymbol="X",m.running=!0,r())}),s.addEventListener("click",function(){n()});for(var p=0;p<f.length;p++)f[p].onclick=function(){m.difficulty=this.value};for(var b=0;b<u.length;b++)!function(n){u[n].addEventListener("click",function(){e(n)})}(b)});